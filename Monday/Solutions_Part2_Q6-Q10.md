# ğŸ¯ SYSTEM DESIGN SOLUTIONS - PART 2 (Questions 6-10)

> **Purpose:** Simple explanations you can use word-for-word in interviews  
> **Format:** Architecture â†’ What each box does â†’ How to explain it

---

# QUESTION 6: Resource Optimizer

## The Ask
> "Design a system that recommends optimal team/task assignments based on skills and workload."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            RESOURCE OPTIMIZER                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA COLLECTION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                      INPUT DATA SOURCES                           â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚      â•‘
â•‘    â”‚    â”‚USER PROFILES â”‚  â”‚  TASK DATA   â”‚  â”‚ HISTORICAL   â”‚          â”‚      â•‘
â•‘    â”‚    â”‚              â”‚  â”‚              â”‚  â”‚  OUTCOMES    â”‚          â”‚      â•‘
â•‘    â”‚    â”‚ â€¢ Skills     â”‚  â”‚ â€¢ Type       â”‚  â”‚              â”‚          â”‚      â•‘
â•‘    â”‚    â”‚ â€¢ Experience â”‚  â”‚ â€¢ Complexity â”‚  â”‚ â€¢ Completion â”‚          â”‚      â•‘
â•‘    â”‚    â”‚ â€¢ Workload   â”‚  â”‚ â€¢ Deadline   â”‚  â”‚   time       â”‚          â”‚      â•‘
â•‘    â”‚    â”‚ â€¢ Timezone   â”‚  â”‚ â€¢ Required   â”‚  â”‚ â€¢ Quality    â”‚          â”‚      â•‘
â•‘    â”‚    â”‚ â€¢ Available  â”‚  â”‚   skills     â”‚  â”‚   score      â”‚          â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    SKILL MATCHING ENGINE                          â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Task requires: [Python, ML, Data Analysis]                    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â•‘
â•‘    â”‚    â”‚ Candidate â”‚ Skills Match â”‚ Workload â”‚ Score            â”‚    â”‚      â•‘
â•‘    â”‚    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Alice     â”‚ 3/3 (100%)   â”‚ 60%      â”‚ 0.85             â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Bob       â”‚ 2/3 (67%)    â”‚ 40%      â”‚ 0.72             â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Charlie   â”‚ 3/3 (100%)   â”‚ 90%      â”‚ 0.55             â”‚    â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Score = 0.5*skill_match + 0.3*(1-workload) + 0.2*past_success â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                     CONSTRAINT SOLVER                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    HARD CONSTRAINTS (must satisfy):                              â”‚      â•‘
â•‘    â”‚    â€¢ Max workload per person: 80%                                â”‚      â•‘
â•‘    â”‚    â€¢ Required skills: at least 1 person with each                â”‚      â•‘
â•‘    â”‚    â€¢ Timezone overlap: team needs 4+ hours overlap               â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    SOFT CONSTRAINTS (optimize):                                  â”‚      â•‘
â•‘    â”‚    â€¢ Minimize total cost                                         â”‚      â•‘
â•‘    â”‚    â€¢ Balance workload across team                                â”‚      â•‘
â•‘    â”‚    â€¢ Prefer past collaborators                                   â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Algorithm: Linear Programming / OR-Tools                      â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   OUTPUT: RECOMMENDATIONS                         â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚  â”‚ RECOMMENDED ASSIGNMENT for "ML Pipeline Task"               â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                             â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ ğŸ‘¤ Alice (Lead) - Python, ML expertise                      â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ ğŸ‘¤ Bob (Support) - Data Analysis                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                             â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Why this team:                                              â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ âœ… 100% skill coverage                                       â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ âœ… Combined workload: 65% (healthy)                          â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ âœ… Alice completed 5 similar tasks (avg 2 days early)        â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                             â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ [Accept] [Suggest Alternative] [Assign Manually]            â”‚  â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Skill Matching** | "Compute match score based on skill alignment. Someone with 3/3 required skills scores higher than 2/3." |
| **Constraint Solver** | "Use Linear Programming to find optimal assignment. Hard constraints must be satisfied. Soft constraints are optimized." |
| **Explainable Output** | "Show WHY we recommend this team: skill coverage, workload balance, past success. Builds trust." |

---

## ğŸ“š Resources
- [Google OR-Tools](https://developers.google.com/optimization)
- [Assignment Problem](https://en.wikipedia.org/wiki/Assignment_problem)

---

# QUESTION 7: Semantic Search for monday.com

## The Ask
> "Design a search system that understands meaning, not just keywords."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          SEMANTIC SEARCH SYSTEM                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INDEXING PIPELINE (Offline) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                      CONTENT SOURCES                              â”‚      â•‘
â•‘    â”‚       Items, Updates, Docs, Files â†’ Change Data Capture (CDC)    â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    EMBEDDING GENERATOR                            â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Input: "Q1 product launch delayed due to resource constraints"â”‚      â•‘
â•‘    â”‚                           â”‚                                      â”‚      â•‘
â•‘    â”‚                           â–¼                                      â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â•‘
â•‘    â”‚    â”‚         EMBEDDING MODEL (text-embedding-3)             â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚     "Q1 product launch..." â†’ [0.12, -0.34, 0.56, ...]  â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                              (1536 dimensions)         â”‚    â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Batch processing: ~1M items/hour                              â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚               VECTOR DATABASE (Pinecone/Weaviate)                 â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Index Structure:                                              â”‚      â•‘
â•‘    â”‚    {                                                             â”‚      â•‘
â•‘    â”‚      id: "item_12345",                                          â”‚      â•‘
â•‘    â”‚      vector: [0.12, -0.34, ...],                                â”‚      â•‘
â•‘    â”‚      metadata: {                                                 â”‚      â•‘
â•‘    â”‚        tenant_id: "acme_corp",  â† CRITICAL for isolation        â”‚      â•‘
â•‘    â”‚        board_id: "board_789",                                   â”‚      â•‘
â•‘    â”‚        type: "item"                                             â”‚      â•‘
â•‘    â”‚      }                                                           â”‚      â•‘
â•‘    â”‚    }                                                             â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUERY PIPELINE (Online) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                        USER QUERY                                 â”‚      â•‘
â•‘    â”‚              "Find items about launch delays"                     â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                      QUERY EMBEDDING                              â”‚      â•‘
â•‘    â”‚  "Find items about launch delays" â†’ [0.11, -0.32, 0.58, ...]    â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    VECTOR SEARCH (ANN)                            â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    SEARCH vectors                                                â”‚      â•‘
â•‘    â”‚    NEAR [0.11, -0.32, 0.58, ...]                                 â”‚      â•‘
â•‘    â”‚    WHERE tenant_id = "acme_corp"     â† Tenant isolation          â”‚      â•‘
â•‘    â”‚    AND user_has_access(board_id)     â† Permission check          â”‚      â•‘
â•‘    â”‚    LIMIT 20                                                      â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    "launch delays" matches "product release postponed" âœ“         â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Latency: <50ms for 10M+ vectors                               â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    HYBRID RE-RANKING                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Final Score =                                                 â”‚      â•‘
â•‘    â”‚       0.7 Ã— Semantic Score (vector similarity)                   â”‚      â•‘
â•‘    â”‚     + 0.2 Ã— Keyword Score (BM25)                                 â”‚      â•‘
â•‘    â”‚     + 0.1 Ã— Recency Boost                                        â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Embeddings** | "Convert text to vectors where similar meanings are close. 'Launch delayed' and 'release postponed' have nearly identical vectors even with no shared words." |
| **Vector Database** | "Stores millions of vectors with metadata. Every vector has tenant_id for isolation. Search 10M+ vectors in <50ms using ANN." |
| **Hybrid Search** | "Combine semantic search (understands meaning) with keyword search (exact matches). Some queries like error codes need exact matching." |

---

## Key Insight (Interview Quote)
> "The key to semantic search in multi-tenant systems is **metadata filtering**. Every vector stores tenant_id, and we filter BEFORE similarity search. Both security and performance benefit."

---

## ğŸ“š Resources
- [OpenAI Embeddings](https://platform.openai.com/docs/guides/embeddings)
- [Pinecone](https://docs.pinecone.io/docs/overview)
- [Hybrid Search](https://weaviate.io/blog/hybrid-search-explained)

---

# QUESTION 8: Anomaly Detection Dashboard

## The Ask
> "Design a system that flags unusual patterns (usage spikes, drops, errors) for proactive support."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                       ANOMALY DETECTION DASHBOARD                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA INGESTION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â•‘
â•‘    â”‚ API Requests â”‚  â”‚  Error Logs  â”‚  â”‚User Activity â”‚                      â•‘
â•‘    â”‚ (per tenant) â”‚  â”‚ (per tenant) â”‚  â”‚ (per tenant) â”‚                      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                      â•‘
â•‘           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â•‘
â•‘                             â–¼                                                 â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  KAFKA / KINESIS STREAM                           â”‚      â•‘
â•‘    â”‚                 Partitioned by tenant_id                          â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚               TIME-SERIES DATABASE (InfluxDB)                     â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    api_requests_per_minute{tenant="acme"}                        â”‚      â•‘
â•‘    â”‚    error_rate{tenant="acme", error_type="500"}                   â”‚      â•‘
â•‘    â”‚    active_users{tenant="acme"}                                   â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Retention: 90 days (for seasonality detection)                â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  ANOMALY DETECTION ENGINE                         â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â•‘
â•‘    â”‚    â”‚ METHOD 1: STATISTICAL (Simple, Fast)                   â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Z-Score = (current - mean) / std_dev                   â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ If |z| > 3 â†’ Anomaly                                   â”‚    â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â•‘
â•‘    â”‚    â”‚ METHOD 2: SEASONAL (Prophet/STL)                       â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Learns: "Monday mornings are always high"              â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Alerts: Only if above expected Monday level            â”‚    â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â•‘
â•‘    â”‚    â”‚ METHOD 3: ML-BASED (Isolation Forest)                  â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ Catches: Multi-dimensional anomalies                   â”‚    â”‚      â•‘
â•‘    â”‚    â”‚ "Requests normal, but error + latency both elevated"   â”‚    â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                      ALERT MANAGER                                â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    P1 (Critical): Error rate >10%    â†’ Page on-call NOW          â”‚      â•‘
â•‘    â”‚    P2 (High):     Usage drop >50%    â†’ Slack + email             â”‚      â•‘
â•‘    â”‚    P3 (Medium):   Unusual pattern    â†’ Dashboard flag            â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Deduplication: Group related anomalies                        â”‚      â•‘
â•‘    â”‚    Suppression: During maintenance windows                       â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Time-Series DB** | "Store metrics in InfluxDB with 90 days retention. Lets us detect seasonal patterns - Monday mornings always have more activity." |
| **Multi-Method Detection** | "Use three methods: Z-score for simple spikes, seasonal decomposition for patterns, Isolation Forest for multi-dimensional anomalies." |
| **Alert Deduplication** | "Group related anomalies. If error rate and latency spike together, that's one alert, not two. Reduces alert fatigue." |

---

## ğŸ“š Resources
- [Facebook Prophet](https://facebook.github.io/prophet/)
- [Isolation Forest](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html)
- [Netflix Anomaly Detection](https://netflixtechblog.com/rad-outlier-detection-on-big-data-d6b0494371ab)

---

# QUESTION 9: Feature Store for ML Models

## The Ask
> "Design a feature store that serves pre-computed features for real-time ML predictions."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              FEATURE STORE                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEATURE COMPUTATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   BATCH FEATURES (Daily)                          â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Source: Data Lake (S3)                                        â”‚      â•‘
â•‘    â”‚    Compute: Spark Jobs                                           â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Examples:                                                     â”‚      â•‘
â•‘    â”‚    â€¢ user_boards_created_30d: Count in last 30 days              â”‚      â•‘
â•‘    â”‚    â€¢ user_automation_count: Total automations                    â”‚      â•‘
â•‘    â”‚    â€¢ user_avg_session_duration: Average session length           â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Schedule: Run at 3 AM, complete by 6 AM                       â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                 STREAMING FEATURES (Real-time)                    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Source: Kafka events                                          â”‚      â•‘
â•‘    â”‚    Compute: Flink / Spark Streaming                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Examples:                                                     â”‚      â•‘
â•‘    â”‚    â€¢ user_actions_last_5min: Count in last 5 minutes             â”‚      â•‘
â•‘    â”‚    â€¢ user_current_board: Board user is viewing                   â”‚      â•‘
â•‘    â”‚    â€¢ user_last_action_type: What user just did                   â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Latency: Events processed within 1 second                     â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEATURE STORAGE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                 ONLINE STORE (Redis Cluster)                      â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Purpose: Low-latency serving for real-time predictions        â”‚      â•‘
â•‘    â”‚    Latency: <5ms p99                                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Key Format: tenant_id:entity_type:entity_id:feature_name      â”‚      â•‘
â•‘    â”‚    Example: "acme:user:123:boards_30d" â†’ 15                      â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Multi-tenant: Keys always prefixed with tenant_id             â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                 OFFLINE STORE (S3 / Delta Lake)                   â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Purpose: Historical features for training                     â”‚      â•‘
â•‘    â”‚    Format: Parquet, partitioned by date                          â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Point-in-time correctness:                                    â”‚      â•‘
â•‘    â”‚    â€¢ Training query: "Get features AS OF 2025-12-01"             â”‚      â•‘
â•‘    â”‚    â€¢ Prevents data leakage                                       â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEATURE SERVING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                       SERVING API                                 â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  GET /features?tenant=acme&user=123&features=boards_30d,actions  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  Response:                                                       â”‚      â•‘
â•‘    â”‚  {                                                               â”‚      â•‘
â•‘    â”‚    "user_id": "123",                                            â”‚      â•‘
â•‘    â”‚    "features": {                                                 â”‚      â•‘
â•‘    â”‚      "boards_30d": 15,                                          â”‚      â•‘
â•‘    â”‚      "actions_5min": 3                                          â”‚      â•‘
â•‘    â”‚    }                                                             â”‚      â•‘
â•‘    â”‚  }                                                               â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  Latency: <10ms for batch get of 20 features                     â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Batch vs Streaming** | "Two paths: batch features computed daily in Spark (30-day aggregations), streaming features in real-time (current session). Model uses both." |
| **Online vs Offline** | "Online store (Redis) serves predictions with <5ms latency. Offline store (S3) stores historical features for training." |
| **Point-in-Time** | "When training, query features AS OF the prediction date. Prevents data leakage - using future info to predict past." |

---

## ğŸ“š Resources
- [Feast Feature Store](https://feast.dev/)
- [Tecton Feature Store](https://www.tecton.ai/blog/what-is-a-feature-store/)
- [Uber Michelangelo](https://www.uber.com/blog/michelangelo-machine-learning-platform/)

---

# QUESTION 10: A/B Testing Framework for ML

## The Ask
> "Design a system to A/B test ML model changes with statistical rigor."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         A/B TESTING FRAMEWORK                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EXPERIMENT SETUP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                     EXPERIMENT CONFIG                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  {                                                               â”‚      â•‘
â•‘    â”‚    "experiment_id": "rec_model_v2_test",                        â”‚      â•‘
â•‘    â”‚    "hypothesis": "New model increases adoption by 5%",           â”‚      â•‘
â•‘    â”‚    "variants": {                                                 â”‚      â•‘
â•‘    â”‚      "control": {"model": "rec_v1", "allocation": 50%},         â”‚      â•‘
â•‘    â”‚      "treatment": {"model": "rec_v2", "allocation": 50%}        â”‚      â•‘
â•‘    â”‚    },                                                            â”‚      â•‘
â•‘    â”‚    "metrics": {                                                  â”‚      â•‘
â•‘    â”‚      "primary": "automation_adoption_rate",                     â”‚      â•‘
â•‘    â”‚      "secondary": ["click_rate", "retention_7d"]                â”‚      â•‘
â•‘    â”‚    },                                                            â”‚      â•‘
â•‘    â”‚    "duration": "14 days",                                       â”‚      â•‘
â•‘    â”‚    "min_sample_size": 10000                                     â”‚      â•‘
â•‘    â”‚  }                                                               â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TRAFFIC ROUTING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    ASSIGNMENT SERVICE                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Hash-based assignment:                                        â”‚      â•‘
â•‘    â”‚    bucket = hash(user_id + experiment_id) % 100                  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    if bucket < 50: â†’ control                                     â”‚      â•‘
â•‘    â”‚    else: â†’ treatment                                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Properties:                                                   â”‚      â•‘
â•‘    â”‚    âœ… Deterministic (same user â†’ same variant)                   â”‚      â•‘
â•‘    â”‚    âœ… Uniform distribution                                        â”‚      â•‘
â•‘    â”‚    âœ… Independent across experiments                              â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â”‚                                           â•‘
â•‘              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â•‘
â•‘              â–¼                                         â–¼                     â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â•‘
â•‘    â”‚      CONTROL        â”‚               â”‚     TREATMENT       â”‚             â•‘
â•‘    â”‚   Model v1 (old)    â”‚               â”‚   Model v2 (new)    â”‚             â•‘
â•‘    â”‚    50% of users     â”‚               â”‚    50% of users     â”‚             â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â•‘
â•‘              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â•‘
â•‘                                â–¼                                              â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   METRICS COLLECTION                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  Every user action logged with variant assignment                â”‚      â•‘
â•‘    â”‚  Joined with experiment data for analysis                        â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  STATISTICAL ANALYSIS                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚  â”‚ Metric: automation_adoption_rate                           â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Control:    12.3% (n=5,234)                                â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Treatment:  14.1% (n=5,189)                                â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Lift: +1.8pp (+14.6% relative)                             â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ 95% CI: [0.8pp, 2.8pp]                                     â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ p-value: 0.0003                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ âœ… STATISTICALLY SIGNIFICANT                                â”‚  â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  Guardrails checked: Latency âœ…  Errors âœ…  Revenue âœ…            â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Hash-Based Assignment** | "Hash user_id + experiment_id to assign variants. Deterministic - same user always sees same variant. Independent across experiments." |
| **Statistical Rigor** | "Pre-register hypothesis and sample size. Use confidence intervals, not just p-values. Apply Bonferroni correction for multiple metrics." |
| **Guardrail Metrics** | "Beyond primary metric, check guardrails: latency, errors, revenue. Don't ship if guardrails violated even if primary improves." |

---

## Key Insight (Interview Quote)
> "The key to good A/B testing is **avoiding false positives**. Pre-register your hypothesis, set sample size upfront, don't peek at results daily, and correct for multiple comparisons."

---

## ğŸ“š Resources
- [Netflix Experimentation](https://netflixtechblog.com/its-all-a-bout-testing-the-netflix-experimentation-platform-4e1ca458c15)
- [Sample Size Calculator](https://www.evanmiller.org/ab-testing/sample-size.html)
- [Spotify Experimentation](https://engineering.atspotify.com/2020/10/experimentation-platform-at-spotify-part-1/)

---

# ğŸ“‹ PART 2 SUMMARY

| Q# | Question | Key Pattern | Key Tech |
|----|----------|-------------|----------|
| 6 | Resource Optimizer | Constraint Solving | OR-Tools, Linear Programming |
| 7 | Semantic Search | Vector + Metadata Filter | Embeddings, Pinecone, ANN |
| 8 | Anomaly Detection | Multi-Method | Z-score, Prophet, Isolation Forest |
| 9 | Feature Store | Online + Offline | Redis, S3, Spark Streaming |
| 10 | A/B Testing | Hash Assignment | Statistical rigor, Guardrails |

---

**âœ… Part 2 Complete! See Solutions_Part3_Q11-Q15_v2.md for Questions 11-15**
