# ğŸ¯ SYSTEM DESIGN SOLUTIONS - PART 3 (Questions 11-15)

> **Purpose:** Simple explanations you can use word-for-word in interviews  
> **Format:** Architecture â†’ What each box does â†’ How to explain it

---

# QUESTION 11: Model Drift Detection System

## The Ask
> "Design a system that detects when ML models degrade over time."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         MODEL DRIFT DETECTION                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                       TYPES OF DRIFT                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚      â•‘
â•‘    â”‚  â”‚   DATA DRIFT   â”‚ â”‚ CONCEPT DRIFT  â”‚ â”‚  PREDICTION    â”‚        â”‚      â•‘
â•‘    â”‚  â”‚ (Input change) â”‚ â”‚ (Relationship  â”‚ â”‚    DRIFT       â”‚        â”‚      â•‘
â•‘    â”‚  â”‚                â”‚ â”‚   change)      â”‚ â”‚                â”‚        â”‚      â•‘
â•‘    â”‚  â”‚ User behavior  â”‚ â”‚ What "good"    â”‚ â”‚ Model outputs  â”‚        â”‚      â•‘
â•‘    â”‚  â”‚ changed        â”‚ â”‚ means changed  â”‚ â”‚ shifted        â”‚        â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA COLLECTION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  REFERENCE DATA (Training)                        â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Stored distributions:                                         â”‚      â•‘
â•‘    â”‚    â€¢ Feature distributions (histograms)                          â”‚      â•‘
â•‘    â”‚    â€¢ Label distributions                                         â”‚      â•‘
â•‘    â”‚    â€¢ Prediction distributions                                    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Captured at: Model training time                              â”‚      â•‘
â•‘    â”‚    Stored in: S3 + Feature Store                                 â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   PRODUCTION DATA (Live)                          â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Sampled from production:                                      â”‚      â•‘
â•‘    â”‚    â€¢ Input features (logged on every prediction)                 â”‚      â•‘
â•‘    â”‚    â€¢ Model predictions (logged on every prediction)              â”‚      â•‘
â•‘    â”‚    â€¢ Ground truth labels (when available, delayed)               â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Sample rate: 10% of predictions (for cost efficiency)         â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  DRIFT DETECTION ENGINE                           â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚  â”‚ METHOD 1: PSI (Population Stability Index)                 â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ PSI = Î£ (Actual% - Expected%) Ã— ln(Actual%/Expected%)      â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ PSI < 0.1    â†’ No drift (green) âœ…                          â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ PSI 0.1-0.25 â†’ Moderate drift (yellow) âš ï¸                   â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ PSI > 0.25   â†’ Significant drift (red) ğŸ”´                   â”‚  â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚  â”‚ METHOD 2: KS Test (Kolmogorov-Smirnov)                     â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Statistical test for distribution change                   â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ p-value < 0.05 â†’ Distributions significantly different     â”‚  â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚  â”‚ METHOD 3: Performance Monitoring                           â”‚  â”‚      â•‘
â•‘    â”‚  â”‚                                                            â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Track: Accuracy, AUC, F1 over time                         â”‚  â”‚      â•‘
â•‘    â”‚  â”‚ Alert: If metric drops >10% from baseline                  â”‚  â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    AUTOMATED RESPONSE                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Green (< 0.1)     â†’ Continue monitoring                       â”‚      â•‘
â•‘    â”‚    Yellow (0.1-0.25) â†’ Alert team + increase monitoring          â”‚      â•‘
â•‘    â”‚    Red (> 0.25)      â†’ Auto-rollback OR trigger retrain          â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Types of Drift** | "Three types: Data drift - input distribution changed. Concept drift - what users want changed. Prediction drift - model outputs shifted. We detect all three." |
| **PSI** | "PSI compares reference and production distributions. Under 0.1 is fine, 0.1-0.25 needs monitoring, over 0.25 needs action." |
| **Automated Response** | "When significant drift detected, auto-rollback to previous model or trigger retraining. Limits damage from drifted model." |

---

## ğŸ“š Resources
- [Model Drift Overview](https://www.datarobot.com/wiki/data-drift/)
- [Evidently AI](https://www.evidentlyai.com/)
- [NannyML](https://nannyml.readthedocs.io/en/stable/)

---

# QUESTION 12: ML CI/CD Pipeline

## The Ask
> "Design a CI/CD pipeline for ML models with testing, validation, and gradual rollout."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            ML CI/CD PIPELINE                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                      CODE COMMIT (Git)                            â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Data Scientist pushes:                                        â”‚      â•‘
â•‘    â”‚    â€¢ Model code changes                                          â”‚      â•‘
â•‘    â”‚    â€¢ Feature engineering changes                                 â”‚      â•‘
â•‘    â”‚    â€¢ Config/hyperparameter changes                               â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â”‚ Webhook triggers pipeline                 â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   STAGE 1: UNIT TESTS                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    âœ“ Code linting (Black, flake8)                                â”‚      â•‘
â•‘    â”‚    âœ“ Type checking (mypy)                                        â”‚      â•‘
â•‘    â”‚    âœ“ Unit tests for feature engineering                          â”‚      â•‘
â•‘    â”‚    âœ“ Unit tests for data transformations                         â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Duration: ~2 minutes                                          â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    STAGE 2: TRAINING                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â€¢ Pulls training data from Feature Store                      â”‚      â•‘
â•‘    â”‚    â€¢ Trains model with reproducible config                       â”‚      â•‘
â•‘    â”‚    â€¢ Logs metrics to MLflow                                      â”‚      â•‘
â•‘    â”‚    â€¢ Saves model artifact to S3                                  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Duration: 30 min - 4 hours (depending on model)               â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  STAGE 3: MODEL VALIDATION                        â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    QUALITY GATES (must pass ALL):                                â”‚      â•‘
â•‘    â”‚    âœ“ Accuracy >= 0.85 (on held-out test set)                     â”‚      â•‘
â•‘    â”‚    âœ“ AUC >= 0.80                                                  â”‚      â•‘
â•‘    â”‚    âœ“ Latency p99 <= 100ms (inference benchmark)                  â”‚      â•‘
â•‘    â”‚    âœ“ Model size <= 500MB                                          â”‚      â•‘
â•‘    â”‚    âœ“ No performance regression vs production model               â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    DATA QUALITY GATES:                                           â”‚      â•‘
â•‘    â”‚    âœ“ No null values in critical features                         â”‚      â•‘
â•‘    â”‚    âœ“ Feature distributions within expected ranges                â”‚      â•‘
â•‘    â”‚    âœ“ Training data freshness < 7 days                            â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  STAGE 4: CANARY DEPLOYMENT                       â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â•‘
â•‘    â”‚    â”‚            TRAFFIC SPLIT                                â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚    Production Model (v1) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 95% traffic   â”‚    â”‚      â•‘
â•‘    â”‚    â”‚    Canary Model (v2)     â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 5% traffic    â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚    Duration: 24-48 hours                               â”‚    â”‚      â•‘
â•‘    â”‚    â”‚                                                        â”‚    â”‚      â•‘
â•‘    â”‚    â”‚    Monitor: Error rate, Latency, Business metrics      â”‚    â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    AUTO-ROLLBACK if: Error rate â†‘2x OR Latency â†‘50%              â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                  STAGE 5: GRADUAL ROLLOUT                         â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    5% â”€â”€â–º 25% â”€â”€â–º 50% â”€â”€â–º 75% â”€â”€â–º 100%                           â”‚      â•‘
â•‘    â”‚        â”‚      â”‚      â”‚      â”‚                                    â”‚      â•‘
â•‘    â”‚        â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€ Each step: 4-6 hours            â”‚      â•‘
â•‘    â”‚                                 Monitor at each step             â”‚      â•‘
â•‘    â”‚                                 Auto-rollback if issues          â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Total rollout time: 24-48 hours                               â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Quality Gates** | "Every model must pass automated gates: accuracy thresholds, latency benchmarks, no regression vs production. Prevents bad models from reaching users." |
| **Canary Deployment** | "Send 5% of traffic to new model and monitor. If metrics degrade, auto-rollback. Catches issues offline validation misses." |
| **Gradual Rollout** | "After canary succeeds, ramp 5% â†’ 25% â†’ 50% â†’ 100% over 24-48 hours. Each step has monitoring. Safer than big-bang deployments." |

---

## ğŸ“š Resources
- [MLOps Principles](https://ml-ops.org/)
- [MLflow](https://mlflow.org/docs/latest/projects.html)
- [Canary Deployments](https://martinfowler.com/bliki/CanaryRelease.html)

---

# QUESTION 13: Cost-Optimized GPU Inference

## The Ask
> "Design a system that serves GPU-based models cost-efficiently with smart scaling."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                       COST-OPTIMIZED GPU INFERENCE                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                        THE PROBLEM                                â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    GPU instances cost ~$3/hour (vs $0.10/hour for CPU)           â”‚      â•‘
â•‘    â”‚    Provision for peak â†’ waste 70% on idle                        â”‚      â•‘
â•‘    â”‚    Under-provision â†’ slow responses                              â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SOLUTION LAYERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚              LAYER 1: REQUEST BATCHING                            â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Instead of: 1 request = 1 GPU call (wasteful)                 â”‚      â•‘
â•‘    â”‚    We do: Wait 50ms, batch up to 32 requests, 1 GPU call         â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Request 1 â”€â”                                                  â”‚      â•‘
â•‘    â”‚    Request 2 â”€â”¼â”€â–º Batch (max 32, max 50ms) â”€â–º Single GPU call   â”‚      â•‘
â•‘    â”‚    Request 3 â”€â”˜                                                  â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Savings: 4-8x throughput improvement per GPU                  â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚              LAYER 2: TIERED SERVING                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚    â”‚ TIER 1: PREDICTION CACHE (Redis)                         â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   Hit rate: ~30-40%   Latency: <5ms   Cost: $0            â”‚  â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â”‚                               â”‚ Cache miss                        â”‚      â•‘
â•‘    â”‚                               â–¼                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚    â”‚ TIER 2: DISTILLED MODEL (CPU)                            â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   90% accuracy of full model                             â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   Latency: 20-50ms   Cost: $0.001 per prediction         â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   Use for: Low-value predictions, mobile                 â”‚  â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â”‚                               â”‚ Needs full accuracy               â”‚      â•‘
â•‘    â”‚                               â–¼                                   â”‚      â•‘
â•‘    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘    â”‚    â”‚ TIER 3: FULL MODEL (GPU)                                 â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   Full accuracy model                                    â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   Latency: 50-100ms   Cost: $0.01 per prediction         â”‚  â”‚      â•‘
â•‘    â”‚    â”‚   Use for: Enterprise, high-value predictions            â”‚  â”‚      â•‘
â•‘    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚              LAYER 3: SMART SCALING                               â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    PREDICTIVE SCALING:                                           â”‚      â•‘
â•‘    â”‚    â€¢ Monday 9 AM: Spike â†’ scale UP at 8:45 AM                    â”‚      â•‘
â•‘    â”‚    â€¢ Friday 5 PM: Drop â†’ scale DOWN at 4:45 PM                   â”‚      â•‘
â•‘    â”‚    â€¢ Pre-warm GPUs 15 min before predicted spike                 â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    REACTIVE SCALING (HPA):                                       â”‚      â•‘
â•‘    â”‚    â€¢ Scale UP: GPU utilization > 70% for 2 min                   â”‚      â•‘
â•‘    â”‚    â€¢ Scale DOWN: GPU utilization < 30% for 10 min                â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚              LAYER 4: SPOT INSTANCES                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Instance Mix:                                                 â”‚      â•‘
â•‘    â”‚    â€¢ 30% On-Demand: Guaranteed capacity (baseline)               â”‚      â•‘
â•‘    â”‚    â€¢ 70% Spot: 70% cheaper, may be interrupted                   â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Handling Spot Interruption:                                   â”‚      â•‘
â•‘    â”‚    â€¢ 2-minute warning from AWS                                   â”‚      â•‘
â•‘    â”‚    â€¢ Drain requests from interrupted instance                    â”‚      â•‘
â•‘    â”‚    â€¢ Route to on-demand instances                                â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Savings: 50-70% vs all on-demand                              â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• COST BREAKDOWN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    BEFORE: 100 GPUs Ã— 24h Ã— $3/h = $7,200/day                                â•‘
â•‘    AFTER:  Cache + Distilled + Spot + Batching = ~$1,500/day (80% savings)   â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Request Batching** | "Instead of one request per GPU call, batch up to 32 requests. Gives 4-8x throughput improvement per GPU." |
| **Tiered Serving** | "Three tiers: cache (free), distilled CPU model (cheap), full GPU (expensive). Routes 70% of traffic away from expensive GPUs." |
| **Spot Instances** | "Run 70% on spot instances (70% cheaper). Handle interruptions with graceful draining and fallback to on-demand." |

---

## ğŸ“š Resources
- [NVIDIA Triton Batching](https://docs.nvidia.com/deeplearning/triton-inference-server/user-guide/docs/user_guide/model_configuration.html)
- [Model Distillation](https://arxiv.org/abs/1503.02531)
- [AWS Spot Instances](https://aws.amazon.com/ec2/spot/)

---

# QUESTION 14: Real-Time Personalization Engine

## The Ask
> "Design a system that personalizes the monday.com experience in real-time based on user behavior."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     REAL-TIME PERSONALIZATION ENGINE                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                     USER INTERACTION                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    User actions: Click, View, Create, Edit, Search               â”‚      â•‘
â•‘    â”‚    Client SDK tracks events in real-time                         â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                    EVENT STREAM (Kafka)                           â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  {                                                               â”‚      â•‘
â•‘    â”‚    "user_id": "abc",                                            â”‚      â•‘
â•‘    â”‚    "tenant_id": "acme",                                         â”‚      â•‘
â•‘    â”‚    "event_type": "board_view",                                  â”‚      â•‘
â•‘    â”‚    "board_id": "123",                                           â”‚      â•‘
â•‘    â”‚    "timestamp": "2026-01-03T10:15:00Z"                          â”‚      â•‘
â•‘    â”‚  }                                                               â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  Volume: ~100K events/second                                     â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â”‚                                           â•‘
â•‘              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â•‘
â•‘              â–¼                                         â–¼                     â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â•‘
â•‘    â”‚    BATCH PATH       â”‚               â”‚   REAL-TIME PATH    â”‚             â•‘
â•‘    â”‚  (User Profiles)    â”‚               â”‚ (Session Context)   â”‚             â•‘
â•‘    â”‚                     â”‚               â”‚                     â”‚             â•‘
â•‘    â”‚  Daily Spark jobs:  â”‚               â”‚  Flink Streaming:   â”‚             â•‘
â•‘    â”‚  â€¢ Preferences      â”‚               â”‚  â€¢ Current session  â”‚             â•‘
â•‘    â”‚  â€¢ Historical       â”‚               â”‚  â€¢ Last 10 actions  â”‚             â•‘
â•‘    â”‚    behavior         â”‚               â”‚  â€¢ Active context   â”‚             â•‘
â•‘    â”‚  â€¢ Segment          â”‚               â”‚                     â”‚             â•‘
â•‘    â”‚    membership       â”‚               â”‚  Latency: <1 sec    â”‚             â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â•‘
â•‘              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â•‘
â•‘                                â–¼                                              â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                     FEATURE MERGER                                â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Combines:                                                     â”‚      â•‘
â•‘    â”‚    â€¢ Static features (profile, demographics)                     â”‚      â•‘
â•‘    â”‚    â€¢ Batch features (30-day behavior patterns)                   â”‚      â•‘
â•‘    â”‚    â€¢ Real-time features (current session)                        â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Stored in Redis: tenant_id:user_id:features                   â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                 PERSONALIZATION SERVICES                          â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚      â•‘
â•‘    â”‚  â”‚  TEMPLATE    â”‚ â”‚   CONTENT    â”‚ â”‚   FEATURE    â”‚              â”‚      â•‘
â•‘    â”‚  â”‚ RECOMMENDER  â”‚ â”‚   RANKER     â”‚ â”‚  SUGGESTER   â”‚              â”‚      â•‘
â•‘    â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚              â”‚      â•‘
â•‘    â”‚  â”‚ "Try Sprint  â”‚ â”‚ Re-orders    â”‚ â”‚ "Try the new â”‚              â”‚      â•‘
â•‘    â”‚  â”‚  template"   â”‚ â”‚ dashboard    â”‚ â”‚  automation!"â”‚              â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚      â•‘
â•‘    â”‚  â”‚   SEARCH     â”‚ â”‚ NOTIFICATION â”‚ â”‚  ONBOARDING  â”‚              â”‚      â•‘
â•‘    â”‚  â”‚   BOOSTER    â”‚ â”‚  PRIORITIZER â”‚ â”‚  CUSTOMIZER  â”‚              â”‚      â•‘
â•‘    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â–¼                                           â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   RESPONSE TO CLIENT                              â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Latency budget: <100ms total                                  â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Batch + Real-Time** | "Combine batch features (computed daily, 30-day behavior) with real-time features (current session). Model uses both for better personalization." |
| **Feature Merger** | "Service that merges static profile, batch features, and real-time context. All stored in Redis with tenant_id prefix." |
| **Multiple Services** | "Different services for different use cases: template recs, content ranking, search boosting. All share same user features." |

---

## ğŸ“š Resources
- [Netflix Personalization](https://netflixtechblog.com/netflix-recommendations-beyond-the-5-stars-part-1-55838468f429)
- [Tecton Real-Time Features](https://www.tecton.ai/blog/real-time-feature-engineering-best-practices/)

---

# QUESTION 15: Multi-Region ML Deployment

## The Ask
> "Design ML deployment that works across multiple geographic regions with data residency compliance."

---

## Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                       MULTI-REGION ML DEPLOYMENT                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                      THE REQUIREMENTS                             â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    1. GDPR: EU data must stay in EU                              â”‚      â•‘
â•‘    â”‚    2. Latency: Users should hit nearest region                   â”‚      â•‘
â•‘    â”‚    3. Availability: Region failure shouldn't break service       â”‚      â•‘
â•‘    â”‚    4. Consistency: All regions serve same model version          â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GLOBAL ROUTING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   GLOBAL DNS / CDN                                â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Route by:                                                     â”‚      â•‘
â•‘    â”‚    1. Data residency requirement (EU users â†’ EU region)          â”‚      â•‘
â•‘    â”‚    2. Latency (closest healthy region)                           â”‚      â•‘
â•‘    â”‚    3. Failover (if primary down, route to backup)                â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                   â”‚                                           â•‘
â•‘           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â•‘
â•‘           â–¼                       â–¼                       â–¼                  â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘    â”‚  US REGION   â”‚       â”‚  EU REGION   â”‚       â”‚ APAC REGION  â”‚            â•‘
â•‘    â”‚ (us-east-1)  â”‚       â”‚ (eu-west-1)  â”‚       â”‚(ap-southeast)â”‚            â•‘
â•‘    â”‚              â”‚       â”‚              â”‚       â”‚              â”‚            â•‘
â•‘    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â•‘
â•‘    â”‚ â”‚ML Clusterâ”‚ â”‚       â”‚ â”‚ML Clusterâ”‚ â”‚       â”‚ â”‚ML Clusterâ”‚ â”‚            â•‘
â•‘    â”‚ â”‚Model:v2.1â”‚ â”‚       â”‚ â”‚Model:v2.1â”‚ â”‚       â”‚ â”‚Model:v2.1â”‚ â”‚            â•‘
â•‘    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â•‘
â•‘    â”‚              â”‚       â”‚              â”‚       â”‚              â”‚            â•‘
â•‘    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â•‘
â•‘    â”‚ â”‚  Feature â”‚ â”‚       â”‚ â”‚  Feature â”‚ â”‚       â”‚ â”‚  Feature â”‚ â”‚            â•‘
â•‘    â”‚ â”‚  Store   â”‚ â”‚       â”‚ â”‚  Store   â”‚ â”‚       â”‚ â”‚  Store   â”‚ â”‚            â•‘
â•‘    â”‚ â”‚          â”‚ â”‚       â”‚ â”‚          â”‚ â”‚       â”‚ â”‚          â”‚ â”‚            â•‘
â•‘    â”‚ â”‚ US tenantâ”‚ â”‚       â”‚ â”‚ EU tenantâ”‚ â”‚       â”‚ â”‚APAC tenantâ”‚ â”‚            â•‘
â•‘    â”‚ â”‚data ONLY â”‚ â”‚       â”‚ â”‚data ONLY â”‚ â”‚       â”‚ â”‚data ONLY â”‚ â”‚            â•‘
â•‘    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• KEY INSIGHT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    MODELS are GLOBAL â†’ No customer data, can replicate anywhere  â”‚      â•‘
â•‘    â”‚    FEATURES are REGIONAL â†’ Customer data, stay in home region    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FAILOVER STRATEGY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘
â•‘                                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘    â”‚                   REGION FAILURE HANDLING                         â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Scenario: EU region goes down                                 â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    For non-EU tenants:                                           â”‚      â•‘
â•‘    â”‚    â†’ Failover to US or APAC âœ…                                    â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    For EU tenants (GDPR):                                        â”‚      â•‘
â•‘    â”‚    â†’ CANNOT failover to non-EU âŒ                                 â”‚      â•‘
â•‘    â”‚    â†’ Return degraded response (cached, stale)                    â”‚      â•‘
â•‘    â”‚    â†’ Or fail gracefully with error message                       â”‚      â•‘
â•‘    â”‚                                                                   â”‚      â•‘
â•‘    â”‚    Tradeoff: Compliance > Availability for GDPR                  â”‚      â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Component Explanations (Interview-Ready)

| Component | How to Explain |
|-----------|----------------|
| **Model vs Feature Separation** | "Models are global - no customer data, replicate everywhere. Features are regional - customer data, stay in home region." |
| **Data Residency** | "Feature keys include region prefix. EU tenant features only exist in EU Redis. System physically cannot access EU data from US." |
| **Failover Tradeoffs** | "For GDPR tenants, compliance > availability. If EU goes down, return degraded service rather than process EU data in US." |

---

## ğŸ“š Resources
- [GDPR for ML](https://gdpr.eu/article-44-transfer-of-personal-data/)
- [AWS Multi-Region](https://aws.amazon.com/solutions/implementations/multi-region-application-architecture/)
- [Data Residency Patterns](https://martinfowler.com/articles/data-sovereignty.html)

---

# ğŸ“‹ PART 3 SUMMARY

| Q# | Question | Key Pattern | Key Tech |
|----|----------|-------------|----------|
| 11 | Model Drift | PSI Monitoring | Evidently, Great Expectations |
| 12 | ML CI/CD | Quality Gates + Canary | MLflow, K8s, Argo |
| 13 | GPU Cost | Batching + Tiered + Spot | Triton, Distillation |
| 14 | Personalization | Batch + RT Features | Kafka, Flink, Redis |
| 15 | Multi-Region | Model Global, Data Regional | S3 Replication, Regional Redis |

---

# ğŸ¯ MASTER RESOURCE LIST

## System Design Fundamentals
| Resource | Link |
|----------|------|
| System Design Primer | https://github.com/donnemartin/system-design-primer |
| ByteByteGo | https://bytebytego.com/ |

## MLOps & ML Systems
| Resource | Link |
|----------|------|
| MLOps Community | https://mlops.community/ |
| Made With ML | https://madewithml.com/ |
| Full Stack Deep Learning | https://fullstackdeeplearning.com/ |
| Chip Huyen's ML Systems | https://huyenchip.com/machine-learning-systems-design/toc.html |

## Company Engineering Blogs
| Company | Link |
|---------|------|
| Uber | https://www.uber.com/blog/engineering/ |
| Netflix | https://netflixtechblog.com/ |
| Airbnb | https://medium.com/airbnb-engineering |
| Spotify | https://engineering.atspotify.com/ |
| LinkedIn | https://engineering.linkedin.com/blog |

---

**âœ… All 15 Solutions Complete!**

**Files:**
1. Solutions_Part1_Q1-Q5_v2.md - Multi-tenant, AI Blocks, Permissions, Recommender, Risk
2. Solutions_Part2_Q6-Q10_v2.md - Resource, Search, Anomaly, Feature Store, A/B
3. Solutions_Part3_Q11-Q15_v2.md - Drift, CI/CD, GPU Cost, Personalization, Multi-Region
